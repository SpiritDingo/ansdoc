–ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å NFS-–ø–∞–ø–∫—É —Å Windows-—Å–µ—Ä–≤–µ—Ä–∞ –≤ **openSUSE**, –∞ –¥–æ—Å—Ç—É–ø –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–¥ **–¥–æ–º–µ–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º** (Active Directory), —Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ–º–Ω–æ–≥–æ —Å–ª–æ–∂–Ω–µ–µ, —Ç–∞–∫ –∫–∞–∫ NFS —Å–∞–º –ø–æ —Å–µ–±–µ –Ω–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å AD. –í–æ—Ç –ø–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:

---

## **1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ NFS –Ω–∞ Windows**
### **1.1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–æ–ª–∏ NFS-—Å–µ—Ä–≤–µ—Ä–∞**
- –û—Ç–∫—Ä–æ–π—Ç–µ **"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–º"** ‚Üí **"–î–æ–±–∞–≤–∏—Ç—å —Ä–æ–ª–∏ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã"**.
- –í—ã–±–µ—Ä–∏—Ç–µ **"–°–ª—É–∂–±–∞ NFS"** ‚Üí **"–°–µ—Ä–≤–µ—Ä NFS"**.
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–ª—É–∂–±–∞ **Server for NFS** –∑–∞–ø—É—â–µ–Ω–∞.

### **1.2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—â–µ–π –ø–∞–ø–∫–∏**
- –ö–ª–∏–∫–Ω–∏—Ç–µ –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –Ω–∞ –ø–∞–ø–∫–µ ‚Üí **"–°–≤–æ–π—Å—Ç–≤–∞"** ‚Üí –≤–∫–ª–∞–¥–∫–∞ **"NFS-–¥–æ—Å—Ç—É–ø"**.
- –ù–∞–∂–º–∏—Ç–µ **"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º NFS"**.
- –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∞:
  - **"–¢–∏–ø –¥–æ—Å—Ç—É–ø–∞"**: Read-Write –∏–ª–∏ Read-Only.
  - **"–ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"** (`UID`) –∏ **"–ö–æ–¥ –≥—Ä—É–ø–ø—ã"** (`GID`) –¥–æ–ª–∂–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ Linux (—Å–º. –Ω–∏–∂–µ).

### **1.3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–Ω–æ–Ω–∏–º–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ (–µ—Å–ª–∏ –Ω–µ—Ç Kerberos)**
–ü–æ—Å–∫–æ–ª—å–∫—É NFS –≤ Windows –ø–ª–æ—Ö–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å AD –Ω–∞–ø—Ä—è–º—É—é, –º–æ–∂–Ω–æ:
- –†–∞–∑—Ä–µ—à–∏—Ç—å –∞–Ω–æ–Ω–∏–º–Ω—ã–π –¥–æ—Å—Ç—É–ø —Å –º–∞–ø–ø–∏–Ω–≥–æ–º –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π UID/GID.
- –í **PowerShell** (–æ—Ç –∞–¥–º–∏–Ω–∞):
  ```powershell
  Set-NfsMappingStore -EnableLdapMapping $false
  nfsadmin server config sec=sys
  ```
  –≠—Ç–æ –∑–∞—Å—Ç–∞–≤–∏—Ç NFS –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ UID/GID –≤–º–µ—Å—Ç–æ AD.

---

## **2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Linux (openSUSE)**
### **2.1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ NFS-–∫–ª–∏–µ–Ω—Ç–∞**
```bash
sudo zypper install nfs-client
```

### **2.2. –ü–æ–ª—É—á–µ–Ω–∏–µ UID/GID –¥–æ–º–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
–ü–µ—Ä–µ–¥ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –Ω—É–∂–Ω–æ —É–∑–Ω–∞—Ç—å, –∫–∞–∫–æ–π `UID` –∏ `GID` –∏–º–µ–µ—Ç –≤–∞—à –¥–æ–º–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ Linux.  
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
```bash
id username@domain
```
–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:
```bash
uid=10000(username) gid=10000(domain users) groups=...
```
–ó–∞–ø–æ–º–Ω–∏—Ç–µ `UID` –∏ `GID`.

### **2.3. –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º UID/GID**
```bash
sudo mkdir -p /mnt/nfs_win
sudo mount -t nfs <Windows_IP>:/shared /mnt/nfs_win -o vers=3,nolock,uid=10000,gid=10000
```
- `uid=10000,gid=10000` ‚Äî –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–≤–æ–∏ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ `id`.

### **2.4. –ê–≤—Ç–æ–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `/etc/fstab`**
–î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É:
```bash
<Windows_IP>:/shared  /mnt/nfs_win  nfs  vers=3,nolock,uid=10000,gid=10000,noauto,x-systemd.automount  0  0
```
–ü—Ä–∏–º–µ–Ω–∏—Ç–µ:
```bash
sudo mount -a
```

---

## **3. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: Kerberos + NFSv4 (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)**
–ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ AD, –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å **NFSv4 + Kerberos**:
1. **–ù–∞ Windows**:
   - –í–∫–ª—é—á–∏—Ç–µ **"Kerberos authentication"** –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö NFS.
   ```powershell
   nfsadmin server config sec=krb5
   ```
2. **–ù–∞ openSUSE**:
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Kerberos-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é (`kinit user@DOMAIN`).
   - –ú–æ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å `sec=krb5`:
     ```bash
     sudo mount -t nfs4 <Windows_IP>:/shared /mnt/nfs_win -o sec=krb5,vers=4.2
     ```

---

## **4. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è**
### **–û—à–∏–±–∫–∞: "Permission denied"**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞ Windows –≤ NFS-—à–∞—Ä–µ —É–∫–∞–∑–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ `UID`/`GID`.
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ:
  ```bash
  sudo mount -t nfs <IP>:/share /mnt/nfs_win -o vers=3,nolock,uid=10000,gid=10000,rw
  ```

### **–û—à–∏–±–∫–∞: "RPC timeout"**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –æ—Ç–∫—Ä—ã—Ç—ã –ª–∏ –ø–æ—Ä—Ç—ã **2049 (TCP)** –∏ **111 (UDP)** –≤ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–µ Windows.

### **–û—à–∏–±–∫–∞: "Stale file handle"**
- –ü–µ—Ä–µ–º–æ–Ω—Ç–∏—Ä—É–π—Ç–µ:
  ```bash
  sudo umount -l /mnt/nfs_win
  sudo mount -a
  ```

---

## **–ò—Ç–æ–≥**
- **–ü—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±** (–±–µ–∑ Kerberos):  
  ```bash
  sudo mount -t nfs <Windows_IP>:/shared /mnt/nfs_win -o vers=3,nolock,uid=10000,gid=10000
  ```
- **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å–ø–æ—Å–æ–±** (—Å Kerberos):  
  ```bash
  sudo mount -t nfs4 <Windows_IP>:/shared /mnt/nfs_win -o sec=krb5,vers=4.2
  ```

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –ø—Ä–∞–≤–∞ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ UID/GID –≤ Linux —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –º–∞–ø–ø–∏–Ω–≥–æ–º –Ω–∞ Windows. üöÄ